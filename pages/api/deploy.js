function _0x2f1c(_0x34a689,_0x46f948){const _0x530c2d=_0x530c();return _0x2f1c=function(_0x2f1cb0,_0x5acf50){_0x2f1cb0=_0x2f1cb0-0x1a2;let _0x7c68db=_0x530c2d[_0x2f1cb0];return _0x7c68db;},_0x2f1c(_0x34a689,_0x46f948);}(function(_0x5589b5,_0x1606a7){const _0x45e4d7=_0x2f1c,_0x3114f1=_0x5589b5();while(!![]){try{const _0x5833cb=-parseInt(_0x45e4d7(0x1c1))/0x1+parseInt(_0x45e4d7(0x1cb))/0x2*(parseInt(_0x45e4d7(0x1d1))/0x3)+-parseInt(_0x45e4d7(0x1c4))/0x4*(parseInt(_0x45e4d7(0x1a3))/0x5)+-parseInt(_0x45e4d7(0x1be))/0x6*(-parseInt(_0x45e4d7(0x1c2))/0x7)+parseInt(_0x45e4d7(0x1ad))/0x8*(-parseInt(_0x45e4d7(0x1c5))/0x9)+parseInt(_0x45e4d7(0x1d0))/0xa+-parseInt(_0x45e4d7(0x1bc))/0xb*(-parseInt(_0x45e4d7(0x1c9))/0xc);if(_0x5833cb===_0x1606a7)break;else _0x3114f1['push'](_0x3114f1['shift']());}catch(_0x5e6096){_0x3114f1['push'](_0x3114f1['shift']());}}}(_0x530c,0x9435f));import _0x3fc3a2 from'crypto';import{supabase}from'../../lib/supabase';export default async function handler(_0x5d49e4,_0x381921){const _0x58459e=_0x2f1c;if(_0x5d49e4['method']!==_0x58459e(0x1b5))return _0x381921[_0x58459e(0x1c6)](0x195)['json']({'error':_0x58459e(0x1b0)});const _0x8e2578=_0x5d49e4[_0x58459e(0x1ca)][_0x58459e(0x1ac)]?.[_0x58459e(0x1a7)]('Bearer\x20',''),{user:_0x236c42}=await supabase[_0x58459e(0x1d9)][_0x58459e(0x1ae)](_0x8e2578);if(!_0x236c42)return _0x381921[_0x58459e(0x1c6)](0x191)[_0x58459e(0x1a8)]({'error':'Unauthorized'});const {data:_0x1513cb,error:_0x558f61}=await supabase[_0x58459e(0x1bf)](_0x58459e(0x1a2))['select'](_0x58459e(0x1cf))['eq']('id',_0x236c42['id'])['single']();if(_0x558f61||!_0x1513cb?.[_0x58459e(0x1cf)])return _0x381921[_0x58459e(0x1c6)](0x193)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1c8)});const {username:_0xbfcd08,ram:_0x19ccfd,cpu:_0x1c91a2}=_0x5d49e4[_0x58459e(0x1b9)];if(!_0xbfcd08||!_0x19ccfd||!_0x1c91a2)return _0x381921[_0x58459e(0x1c6)](0x190)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1d4)});const _0x2de076=_0x58459e(0x1d8),_0x3f61fa='ptla_WNQY5xBLAYF40mm1YuvPT2npMpsT8xcftCMdt3FXVKt',_0xd5310c=_0x3fc3a2['randomBytes'](0x3)['toString'](_0x58459e(0x1d6)),_0x17c993=parseInt(_0x19ccfd),_0x5e166e=parseInt(_0x1c91a2),_0x3030db=_0x17c993,_0x5cce26=_0xbfcd08[_0x58459e(0x1ce)](),_0x3cc226={'Authorization':_0x58459e(0x1a6)+_0x3f61fa,'Accept':_0x58459e(0x1d5),'Content-Type':'application/json'};try{const _0x54c130=await fetch(_0x2de076+'/api/application/nodes',{'headers':_0x3cc226}),_0x509719=await _0x54c130[_0x58459e(0x1a8)](),_0x169a10=_0x509719[_0x58459e(0x1c0)][_0x58459e(0x1b1)](_0x2c90bb=>_0x2c90bb[_0x58459e(0x1d3)]['name'][_0x58459e(0x1ce)]()===_0x58459e(0x1b7));if(!_0x169a10)return _0x381921[_0x58459e(0x1c6)](0x194)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1c7)});const _0x5e3890=_0x169a10[_0x58459e(0x1d3)]['id'],_0x78b361=await fetch(_0x2de076+_0x58459e(0x1ba)+_0x5e3890+'/allocations',{'headers':_0x3cc226}),_0x1ea6f5=await _0x78b361[_0x58459e(0x1a8)](),_0x268ba2=_0x1ea6f5[_0x58459e(0x1c0)][_0x58459e(0x1b1)](_0x25f427=>!_0x25f427[_0x58459e(0x1d3)][_0x58459e(0x1b3)]);if(!_0x268ba2)return _0x381921[_0x58459e(0x1c6)](0x194)[_0x58459e(0x1a8)]({'error':'Allocation\x20kosong\x20tidak\x20tersedia'});const _0x2b0c63=_0x268ba2[_0x58459e(0x1d3)]['id'],_0x599d9c=await fetch(_0x2de076+_0x58459e(0x1b6),{'headers':_0x3cc226}),_0x2077b8=await _0x599d9c[_0x58459e(0x1a8)](),_0x129e92=_0x2077b8[_0x58459e(0x1c0)][_0x58459e(0x1b1)](_0x50972b=>_0x50972b[_0x58459e(0x1d3)][_0x58459e(0x1cd)][_0x58459e(0x1ce)]()==='untuk\x20bot\x20wa');if(!_0x129e92)return _0x381921[_0x58459e(0x1c6)](0x194)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1ab)});const _0x4b7fb5=_0x129e92[_0x58459e(0x1d3)]['id'],_0x3e7d47=await fetch(_0x2de076+_0x58459e(0x1d7)+_0x4b7fb5+_0x58459e(0x1a5),{'headers':_0x3cc226}),_0x387bfe=await _0x3e7d47[_0x58459e(0x1a8)](),_0x390ec5=_0x387bfe['data'][_0x58459e(0x1b1)](_0x5c3ccc=>_0x5c3ccc[_0x58459e(0x1d3)][_0x58459e(0x1cd)][_0x58459e(0x1ce)]()==='naofumi');if(!_0x390ec5)return _0x381921['status'](0x194)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1c3)});const _0x401f34=_0x390ec5[_0x58459e(0x1d3)]['id'],_0x4ba93d=_0x390ec5[_0x58459e(0x1d3)][_0x58459e(0x1aa)],_0xd90a38=await fetch(_0x2de076+'/api/application/users',{'method':'POST','headers':_0x3cc226,'body':JSON[_0x58459e(0x1b8)]({'email':_0x5cce26+_0x58459e(0x1b2),'username':_0x5cce26,'first_name':_0x5cce26+_0x58459e(0x1d2),'last_name':'Bot','language':'en','password':_0xd5310c})}),_0x5ddc8f=await _0xd90a38[_0x58459e(0x1a8)]();if(_0x5ddc8f[_0x58459e(0x1bb)])return _0x381921['status'](0x190)[_0x58459e(0x1a8)]({'error':_0x5ddc8f[_0x58459e(0x1bb)][0x0]});const _0x3ecc99=_0x5ddc8f[_0x58459e(0x1d3)]['id'],_0x3bc4f5=await fetch(_0x2de076+'/api/application/servers',{'method':'POST','headers':_0x3cc226,'body':JSON[_0x58459e(0x1b8)]({'name':_0x5cce26+_0x58459e(0x1d2),'user':_0x3ecc99,'egg':_0x401f34,'nest':_0x4b7fb5,'startup':_0x4ba93d,'docker_image':_0x58459e(0x1b4),'environment':{'INST':_0x58459e(0x1bd),'USER_UPLOAD':'0','AUTO_UPDATE':'0','CMD_RUN':_0x58459e(0x1a9)},'limits':{'memory':_0x17c993,'swap':0x0,'disk':_0x3030db,'io':0x1f4,'cpu':_0x5e166e},'feature_limits':{'databases':0x2,'backups':0x2,'allocations':0x1},'deploy':{'locations':[_0x5e3890],'dedicated_ip':![],'port_range':[]},'allocation':_0x2b0c63})}),_0x327fb3=await _0x3bc4f5[_0x58459e(0x1a8)]();if(_0x327fb3[_0x58459e(0x1bb)])return _0x381921['status'](0x190)[_0x58459e(0x1a8)]({'error':_0x327fb3[_0x58459e(0x1bb)][0x0]});return _0x381921[_0x58459e(0x1c6)](0xc8)[_0x58459e(0x1a8)]({'success':!![],'username':_0x5cce26,'password':_0xd5310c,'ram':_0x17c993+_0x58459e(0x1a4),'cpu':_0x5e166e+'%','disk':_0x3030db+_0x58459e(0x1a4),'panel':_0x2de076});}catch(_0xef5cee){return _0x381921['status'](0x1f4)[_0x58459e(0x1a8)]({'error':_0x58459e(0x1af),'detail':_0xef5cee[_0x58459e(0x1cc)]});}}function _0x530c(){const _0x4b2617=['Bearer\x20','replace','json','npm\x20start','startup','Nest\x20tidak\x20ditemukan','authorization','7020088GpKoQx','getUser','Terjadi\x20error\x20saat\x20proses','Method\x20not\x20allowed','find','@gmail.com','assigned','ghcr.io/parkervcp/yolks:nodejs_18','POST','/api/application/nests','nodes','stringify','body','/api/application/nodes/','errors','1100cTdQZe','npm','6CptkIX','from','data','383928RjlxXx','1127812jHeTOz','Egg\x20tidak\x20ditemukan','109932mUvdPO','9BQfbBd','status','Node\x20tidak\x20ditemukan','Akun\x20kamu\x20belum\x20disetujui\x20admin.','80508GDFgaO','headers','319334zmJYTz','message','name','toLowerCase','approved','12066230TXFYMH','3GGjCgu','\x20Server','attributes','Semua\x20field\x20wajib\x20diisi','application/json','hex','/api/application/nests/','https://kenjapublic.digital-market.web.id','auth','profiles','60SBIGJP','\x20MB','/eggs'];_0x530c=function(){return _0x4b2617;};return _0x530c();}
