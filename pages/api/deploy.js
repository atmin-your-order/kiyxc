const _0x385849=_0x4891;(function(_0xeccded,_0x45ffc5){const _0x52cd07=_0x4891,_0x3b4fa0=_0xeccded();while(!![]){try{const _0x34f217=parseInt(_0x52cd07(0xdf))/0x1+parseInt(_0x52cd07(0xfd))/0x2+-parseInt(_0x52cd07(0x106))/0x3*(-parseInt(_0x52cd07(0xe7))/0x4)+parseInt(_0x52cd07(0xf9))/0x5+-parseInt(_0x52cd07(0xde))/0x6*(parseInt(_0x52cd07(0x107))/0x7)+-parseInt(_0x52cd07(0x112))/0x8*(parseInt(_0x52cd07(0x103))/0x9)+-parseInt(_0x52cd07(0xe0))/0xa;if(_0x34f217===_0x45ffc5)break;else _0x3b4fa0['push'](_0x3b4fa0['shift']());}catch(_0x5d558f){_0x3b4fa0['push'](_0x3b4fa0['shift']());}}}(_0x3ac5,0x26f25));import _0x13dfa2 from'fs';import _0x467dab from'path';const configPath=_0x467dab[_0x385849(0x108)]('./config.json'),config=JSON['parse'](_0x13dfa2[_0x385849(0x10f)](configPath,_0x385849(0xf3)));function _0x3ac5(){const _0x5abeca=['96042WpFJum','132493AeODna','3668020yIeHYC','toLowerCase','npm\x20start','/api/application/nodes/','startup','\x20Server','Allocation\x20kosong\x20tidak\x20tersedia','41756KYoYqY','❌\x20ERROR\x20BUAT\x20SERVER:','json','./database.json','toString','status','/api/application/servers','errors','data','hex','writeFileSync','POST','utf-8','@gmail.com','/api/application/nodes','❌\x20TERJADI\x20ERROR:','randomBytes','stringify','1068770NpdprH','/api/application/nests','parse','/api/application/users','512468qvuDWW','Bot','attributes','application/json','Semua\x20field\x20wajib\x20diisi','find','228105seMrJu','/api/application/nests/','method','36qLLIHe','77pnneEL','resolve','assigned','Node\x20tidak\x20ditemukan','/eggs','existsSync','❌\x20ERROR\x20BUAT\x20USER:','body','readFileSync','push','name','8CSToiB','message','npm'];_0x3ac5=function(){return _0x5abeca;};return _0x3ac5();}function _0x4891(_0x5445bd,_0x21dce6){const _0x3ac585=_0x3ac5();return _0x4891=function(_0x489179,_0x2aae00){_0x489179=_0x489179-0xdc;let _0x248818=_0x3ac585[_0x489179];return _0x248818;},_0x4891(_0x5445bd,_0x21dce6);}export default async function handler(_0x2e0062,_0x1bed36){const _0x468869=_0x385849;if(_0x2e0062[_0x468869(0x105)]!==_0x468869(0xf2))return _0x1bed36[_0x468869(0xec)](0x195)['json']({'error':'Method\x20Not\x20Allowed'});const {username:_0x1cdde9,ram:_0x1504a7,cpu:_0x44f043}=_0x2e0062[_0x468869(0x10e)];if(!_0x1cdde9||!_0x1504a7||!_0x44f043)return _0x1bed36[_0x468869(0xec)](0x190)[_0x468869(0xe9)]({'error':_0x468869(0x101)});const {domain:_0xac917,apikey:_0x31802f,nodeName:_0x798194,nestName:_0x102c7b,eggName:_0x11970c}=config,_0x57cd14=crypto[_0x468869(0xf7)](0x3)[_0x468869(0xeb)](_0x468869(0xf0)),_0x19321a=parseInt(_0x1504a7),_0x4a3eb5=parseInt(_0x44f043),_0x27941d=_0x19321a,_0x4d0d86=_0x1cdde9['toLowerCase'](),_0x4e2949={'Authorization':'Bearer\x20'+_0x31802f,'Accept':_0x468869(0x100),'Content-Type':_0x468869(0x100)};try{const _0x530743=await fetch(_0xac917+_0x468869(0xf5),{'headers':_0x4e2949}),_0x1bf3c8=await _0x530743[_0x468869(0xe9)](),_0x5f6dfc=_0x1bf3c8[_0x468869(0xef)][_0x468869(0x102)](_0x4bea21=>_0x4bea21[_0x468869(0xff)][_0x468869(0x111)][_0x468869(0xe1)]()===_0x798194[_0x468869(0xe1)]());if(!_0x5f6dfc)return _0x1bed36[_0x468869(0xec)](0x194)[_0x468869(0xe9)]({'error':_0x468869(0x10a)});const _0x593e19=_0x5f6dfc[_0x468869(0xff)]['id'],_0x58403c=await fetch(_0xac917+_0x468869(0xe3)+_0x593e19+'/allocations',{'headers':_0x4e2949}),_0x3751ac=await _0x58403c['json'](),_0x3182b2=_0x3751ac[_0x468869(0xef)]['find'](_0x2a9719=>!_0x2a9719[_0x468869(0xff)][_0x468869(0x109)]);if(!_0x3182b2)return _0x1bed36[_0x468869(0xec)](0x194)[_0x468869(0xe9)]({'error':_0x468869(0xe6)});const _0x29175e=_0x3182b2[_0x468869(0xff)]['id'],_0x24026f=await fetch(_0xac917+_0x468869(0xfa),{'headers':_0x4e2949}),_0x22dd62=await _0x24026f[_0x468869(0xe9)](),_0x33325e=_0x22dd62[_0x468869(0xef)]['find'](_0x4abae0=>_0x4abae0['attributes'][_0x468869(0x111)]['toLowerCase']()===_0x102c7b[_0x468869(0xe1)]());if(!_0x33325e)return _0x1bed36[_0x468869(0xec)](0x194)[_0x468869(0xe9)]({'error':'Nest\x20tidak\x20ditemukan'});const _0x499810=_0x33325e[_0x468869(0xff)]['id'],_0x2cfbbf=await fetch(_0xac917+_0x468869(0x104)+_0x499810+_0x468869(0x10b),{'headers':_0x4e2949}),_0x534ed0=await _0x2cfbbf[_0x468869(0xe9)](),_0x54acca=_0x534ed0[_0x468869(0xef)]['find'](_0xded3b7=>_0xded3b7[_0x468869(0xff)][_0x468869(0x111)]['toLowerCase']()===_0x11970c[_0x468869(0xe1)]());if(!_0x54acca)return _0x1bed36['status'](0x194)[_0x468869(0xe9)]({'error':'Egg\x20tidak\x20ditemukan'});const _0x5c6727=_0x54acca[_0x468869(0xff)]['id'],_0x17286f=_0x54acca[_0x468869(0xff)][_0x468869(0xe4)],_0x520f14=await fetch(_0xac917+_0x468869(0xfc),{'method':_0x468869(0xf2),'headers':_0x4e2949,'body':JSON[_0x468869(0xf8)]({'email':_0x4d0d86+_0x468869(0xf4),'username':_0x4d0d86,'first_name':_0x4d0d86+_0x468869(0xe5),'last_name':_0x468869(0xfe),'language':'en','password':_0x57cd14})}),_0x3045f3=await _0x520f14[_0x468869(0xe9)]();if(_0x3045f3[_0x468869(0xee)])return _0x1bed36[_0x468869(0xec)](0x190)[_0x468869(0xe9)]({'error':_0x468869(0x10d),'detail':_0x3045f3[_0x468869(0xee)][0x0]});const _0x1a2515=_0x3045f3[_0x468869(0xff)]['id'],_0x130d9a=await fetch(_0xac917+_0x468869(0xed),{'method':_0x468869(0xf2),'headers':_0x4e2949,'body':JSON[_0x468869(0xf8)]({'name':_0x4d0d86+_0x468869(0xe5),'user':_0x1a2515,'egg':_0x5c6727,'nest':_0x499810,'startup':_0x17286f,'docker_image':'ghcr.io/parkervcp/yolks:nodejs_18','environment':{'INST':_0x468869(0xdd),'USER_UPLOAD':'0','AUTO_UPDATE':'0','CMD_RUN':_0x468869(0xe2)},'limits':{'memory':_0x19321a,'swap':0x0,'disk':_0x27941d,'io':0x1f4,'cpu':_0x4a3eb5},'feature_limits':{'databases':0x2,'backups':0x2,'allocations':0x1},'deploy':{'locations':[_0x593e19],'dedicated_ip':![],'port_range':[]},'allocation':_0x29175e})}),_0x48d5fd=await _0x130d9a[_0x468869(0xe9)]();if(_0x48d5fd[_0x468869(0xee)])return _0x1bed36['status'](0x190)['json']({'error':_0x468869(0xe8),'detail':_0x48d5fd[_0x468869(0xee)][0x0]});const _0x4777a3=_0x467dab['resolve'](_0x468869(0xea));let _0x25a4c=[];if(_0x13dfa2[_0x468869(0x10c)](_0x4777a3)){const _0x503008=_0x13dfa2[_0x468869(0x10f)](_0x4777a3,'utf-8');_0x25a4c=JSON[_0x468869(0xfb)](_0x503008);}_0x25a4c[_0x468869(0x110)]({'owner':_0x1cdde9,'username':_0x4d0d86,'password':_0x57cd14,'ram':_0x19321a,'cpu':_0x4a3eb5,'panel':_0xac917}),_0x13dfa2[_0x468869(0xf1)](_0x4777a3,JSON[_0x468869(0xf8)](_0x25a4c,null,0x2)),_0x1bed36['status'](0xc8)[_0x468869(0xe9)]({'success':!![],'username':_0x4d0d86,'password':_0x57cd14,'ram':_0x19321a,'cpu':_0x4a3eb5,'disk':_0x27941d,'panel':_0xac917});}catch(_0x147888){_0x1bed36[_0x468869(0xec)](0x1f4)[_0x468869(0xe9)]({'error':_0x468869(0xf6),'detail':_0x147888[_0x468869(0xdc)]});}}
